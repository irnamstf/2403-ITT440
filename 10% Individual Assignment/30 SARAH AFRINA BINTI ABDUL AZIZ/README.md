`SARAH AFRINA BINTI ABDUL AZIZ | 2022495434 | CDCS2554A | ITT440 | PREPARED FOR SIR SHAHADAN SAAD`

# TITLE: HOW TO DOCKER COMPOSE

## What is Docker Compose?
- Docker Compose is a tool for defining and running multi-container applications.
- It is key to unlocking a streamlined and efficient development and deployment experience.

## What is Compose?
- Compose simplifies control of your entire application stack, making it easy to manage 
  services, networks
  and volumes in a single, comprehensible YAM configuration file.
- With a single command, you can create and start all the services from your configuration 
  file.
- Compose works in all environments such as production, staging, development, testing, as well 
  as CI workflows.
  It also has commands for managing the whole lifecycle of your application:
  ```
  - start, stop and rebuild services
  - view the status of running services
  - stream the log output of running services
  - run a one-off command on a service

  ```
## Why use Compose?
### Key benefits of Docker Compose
- Simplified control: define and manage multi-container applications in a single YAML file.
- Efficient collaboration: configuration files are easy to share, facilitating collaboration 
  among developers, 
  operations teams and other stakeholders.
- Rapid application development: Compose caches the configuration used to create a container.
- Portability across environments: supports variables in the Compose file.
- Extensive community and support: Docker Compose benefits from a vibrant and active 
  community, which means
  abundant resources, tutorials and support.

### Common use cases of Docker Compose
1. Development environments
   - Compose file provides a way to document and configure all of the application's service 
     dependencies(database,
     queues, caches, web service APIs, etc)
   - Using the Compose command line tool you can create and start one or more containers for 
     each dependency with
     a single command (`docker compose up`)
2. Automated testing environments
   - Automated end-to-end testing requires an environment in which to run tests
   - Compose provides a convenient way to create and destroy isolated testing environments for 
     your test suites
   - By defining, the full environment in a Compose file, you can create and destroy these 
     envrionments in just 
     few commands:
     ```
     $ docker compose up -d
     $ ./run_tests
     $ docker compose down
     ```
3. Single host deployments
   - Compose has traditionally been focused on development and testing workflows, but with 
     each release we're making 
     progress on more production-oriented features

## How Compose works
1. Compose File (docker-compose.yml)
   - This YAML file defines the services, networks and volumes for your application. Each   
     service corresponds to a
     Docker container.
2. Services
   - services are the containers that will be run as part of your application. Each service 
     can specify the image to
     use, build instructions, environment variables, port to expose, volume to mount and more.
3. Networks
   - Networks allow you to define how your containers communicate with each other. By default, 
     Docker Compose creates
     a single network for your application, but you can define multiple networks if needed.
4. Volumes
   - Volumes are used to persist data generated by and used by Docker containers. They can be 
     defined in the Compose
     file and shared among multiple containers.

## Basic Workflow
1. Define the Docker COmpose File:
   - Create a `docker-compose.yml` file in the root of your project directory. Here's an 
     example of simple Docker
     Compose file for a web application with a database:
     ```
     version '3.8'

     services:
       web:
         image: my-web-app:latest
         build: .
         ports:
           - "80:80"
         volumes:
           - .:/code
         depends_on:
           - db

     db:
       image: postgres:13
       volumes:
         - db-data:/var/lib/postgresql/data
       environment:
         POSTGRES_DB: mydatabase
         POSTGRES_USER: user
         POSTGRES_PASSWORD: password

     volume:
       db-data:
     ```
2. Build and Run the Application:
   - Use the Docker Compose command-line interface to manage your application.
     - Build the images:
       ```
       docker-compose build
       ```
     - Start the application:
       ```
       docker-compose up
       ```
       This command creates and starts containers for each service defined in the Compose file.
     - Run in detached mode:
       ```
       docker-compose up -d
       ```
       This starts the containers in the background.
3. Managing the Application:
   - View the status of services:
     ```
     docker-compose ps
     ```
   - Stop the application:
     ```
     docker-compose down
     ```
     This command stops and removes all the containers, networks and volumes created by `up`.
   - View logs:
      ```
      docker-compose logs
      ```
   - Scale services:
     ```
     docker-compose up -d --scale web=3
     ```
     This example scales the `web` service to run 3 instances.
4. Extending Docker Compose:
   - Environment variables: You can use the environment variables in your `docker-compose.yml` 
     file to configure
     settings dynamically.
   - Override configuration: You can create multiple Compose files to override configurations 
     for different
     environments.


## Youtube Link
- This is the youtube link for futher explaination about [HOW TO DOCKER COMPOSE](https://youtu.be/TGemBMnrbBY)
    
 ## References
 1. “How Compose works.” (2024, April 19). Docker Documentation. https://docs.docker.com/compose/compose-application-model/
 2. “Docker Compose overview.” (2024, May 2). Docker Documentation. https://docs.docker.com/compose/

